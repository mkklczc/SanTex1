# Тестирование удаления материалов

## Предварительные требования

1. **База данных должна быть настроена и запущена**
2. **Backend сервер должен быть запущен** (`cd backend && npm run dev`)
3. **Frontend приложение должно быть запущено** (`cd webapp && npm run dev`)

## Шаги для тестирования

### 1. Вход в систему
- Откройте браузер и перейдите на `http://localhost:5173`
- Если вы не авторизованы, вас перенаправит на страницу входа
- Войдите используя следующие данные:
  - **Логин:** `malyshev`
  - **Пароль:** `123`

### 2. Проверка наличия материалов
- После входа перейдите на страницу материалов
- Убедитесь, что в списке есть материалы для удаления
- Если материалов нет, сначала создайте несколько материалов

### 3. Тестирование удаления
- Найдите материал, который хотите удалить
- Нажмите кнопку **"Удалить"** рядом с материалом
- Подтвердите удаление в появившемся диалоговом окне
- Материал должен исчезнуть из списка

### 4. Проверка в базе данных
- Материал также должен быть удален из базы данных
- Можно проверить через Prisma Studio: `npx prisma studio`

## Возможные проблемы и решения

### Проблема: "Ошибка авторизации"
**Решение:** Убедитесь, что вы вошли в систему с правильными учетными данными

### Проблема: "Материал не найден"
**Решение:** Материал уже был удален другим пользователем или не существует

### Проблема: "Не удалось удалить материал"
**Решение:** 
1. Проверьте, что backend сервер запущен
2. Проверьте подключение к базе данных
3. Проверьте консоль браузера на наличие ошибок

## Отладка

### Логи в браузере
Откройте Developer Tools (F12) и проверьте консоль на наличие сообщений:
- `Delete button clicked for material: {...}`
- `Starting deletion for material ID: ...`
- `Delete mutation result: {...}`
- `Data refetched after deletion`

### Логи в backend
В терминале с backend сервером должны появиться сообщения:
- `Delete request received for material ID: ...`
- `Existing material found: {...}`
- `Deleting material from database...`
- `Material deleted successfully`

## Создание тестовых данных

Если в базе нет материалов, можно создать их через интерфейс:

1. Нажмите кнопку **"Добавить материал"**
2. Заполните форму:
   - Название: "Тестовый материал"
   - Тип: "Строительный"
   - Производитель: "Тест"
   - Ед.: "шт"
   - Цена: 100
   - Тэги: "тест, строительство"
3. Нажмите **"Сохранить"**
4. Теперь можно тестировать удаление этого материала 